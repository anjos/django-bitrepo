{% extends "base.html" %}
{% load i18n bitrepo_tags %}

{% block media %}
{{ block.super }}
{% endblock %}

{% block title %}{% trans "Packages" %}{% endblock %}

{% block content %}
<div class="bitrepo">
  <p class="navigation">
  <span class="item"><a href="/admin/bitrepo/package/">Manage packages</a></span>
  <span class="item"><a href="/admin/bitrepo/package/add/">Add package</a></span>
  </p>
  <p class="title">{% trans "Available Packages" %}</p>
  <p>{% trans "From this page you have access to all uploaded packages. A package is comprised of a torrent file and attachments (subtitles for example). You can download the whole package as a zip file or just the torrent. Choose by clicking on the appropriate icons bellow." %}</p>

{% ifnotequal pages.paginator.num_pages 1 %}
<p class="pagination">pages: {% bitrepo_paginator pages %}</p>
{% endifnotequal %}

<table class="packages">
  <tr>
    <th>{% trans "Downloads" %}</th>
    <th>{% trans "Name" %}</th>
    <th>{% trans "Date" %}</th>
    <th>{% trans "User" %}</th>
  </tr>
  {% for obj in pages.object_list %}
  <tr class="{% cycle "even" "odd" %}">
    <td class="downloads">
      <a href="{% url bitrepo:zip obj.id %}" title="{% trans "package download" %}"><img src="{% url media "bitrepo/img/png/16/zip.png" %}" width="16" height="16"/></a>
      <a href="{% url bitrepo:torrent obj.id %}" title="{% trans "torrent download" %}"><img src="{% url media "bitrepo/img/png/16/bittorrent.png" %}" width="16" height="16"/></a>
      <a href="{% url admin:bitrepo_package_change obj.id %}" title="{% trans "edit this package" %}"><img src="{% url media "bitrepo/img/png/16/edit.png" %}" width="16" height="16"/></a>
    </td> 
    <td class="name">{{ obj.name }}</td>
    <td class="date">{{ obj.date|date:"D, d/m/y, H:i T" }}</td>
    <td class="user">{{ obj.user }}</td>
  </tr>
  {% empty %}
  <tr><td colspan="5">{% trans "No packages uploaded so far." %}</td></tr>
  {% endfor %}
</table>

</div>
{% endblock %}
